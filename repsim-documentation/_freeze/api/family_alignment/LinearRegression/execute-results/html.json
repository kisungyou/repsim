{
  "hash": "1b82f16859aab2dd9ca286fed1f619e8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"lin_reg\"\ndisplaytitle: \"Linear Regression\"\ncategories: [\"Alignment\"]\nsidebar: api\nformat:\n  html:\n    toc: true\n    toc-location: right\n    include-after-body:\n      - ../custom-title.html\nbibliography: ../REFERENCES.bib\nlink-citations: true\n---\n\n\n\n\n### Description \n\nCompute pairwise linear-regression fit between multiple representations [@kornblith_2019_SimilarityNeuralNetwork]. After centering, for each pair, a least-squares map is used to assess how well one representation predicts the other, and the result is symmetrized. \n\n\n### Usage\n\n::: {.panel-tabset group=\"language\"}\n## Python\n\n`repsim.lin_reg(mats)`\n\n\n## R {.active}\n\n`lin_reg(mats)`\n:::\n\n### Arguments\n\n::: {.panel-tabset group=\"language\"}\n## Python\n- **mats**: sequence of array-like, length $M$\n        List or tuple of `M` data representations, each of shape ``(n_samples, n_features_k)``.\n        All matrices must share the same number of rows for matching samples.\n        Each element can be a NumPy array or any object convertible to one via\n        ``numpy.asarray``.\n\n## R {.active}\n- **mats**: A list of length `M` containing data matrices of size \n    `(n_samples, n_features_k)`. All matrices must share the same number\n    of rows for matching samples.\n:::\n\n### Returns\n\n::: {.panel-tabset group=\"language\"}\n## Python\n\n`numpy.ndarray`\n: Array of shape `(M, M)` of symmetric similarities.\n\n## R {.active}\n\n`matrix`\n: An `(M, M)` symmetric matrix of similarities.\n:::\n\n### Examples\n\n::: {.panel-tabset group=\"language\"}\n\n## Python\n\n::: {.cell}\n\n```{.python .cell-code}\n# | cache: true\n# load necessary packages\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom sklearn.datasets import load_iris\nfrom sklearn.preprocessing import StandardScaler\nimport repsim\n\n# set a random seed\nnp.random.seed(1)\n\n# prepare the prototype\niris = load_iris(as_frame=True).frame.iloc[:, :4]\nurl = \"https://vincentarelbundock.github.io/Rdatasets/csv/datasets/USArrests.csv\"\nusarrests = pd.read_csv(url, index_col=0)\n\nX = StandardScaler().fit_transform(iris.sample(50, random_state=1))\nY = StandardScaler().fit_transform(usarrests)\n\nn, p_X, p_Y = X.shape[0], X.shape[1], Y.shape[1]\n\n# generate 10 of each by perturbation\nmats = []\nfor _ in range(10):\n    mats.append(X + np.random.normal(scale=1.0, size=(n, p_X)))\nfor _ in range(10):\n    mats.append(Y + np.random.normal(scale=1.0, size=(n, p_Y)))\n\n# compute similarities\nout_R2 = repsim.pwcca(mats)\n\n# visualize\nfig, ax = plt.subplots(figsize=(8, 4), constrained_layout=True)\nlabs = [f\"rep {i}\" for i in range(1, 21)]\neven_idx = list(range(1, 20, 2))\n\nim = ax.imshow(out_R2, origin=\"upper\")\nax.set_title(\"Linear Regression\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nText(0.5, 1.0, 'Linear Regression')\n```\n\n\n:::\n\n```{.python .cell-code}\n_ = ax.set_xticks(even_idx)\n_ = ax.set_xticklabels([labs[i] for i in even_idx], rotation=90)\n_ = ax.set_yticks(even_idx)\n_ = ax.set_yticklabels([labs[i] for i in even_idx])\n\nplt.show()\n```\n\n::: {.cell-output-display}\n![](LinearRegression_files/figure-html/unnamed-chunk-2-1.png){width=768}\n:::\n:::\n\n\n## R {.active}\n\n::: {.cell}\n\n```{.r .cell-code}\n# load necessary packages\nlibrary(repsim)\n\n# set a random seed\nset.seed(1)\n\n# prepare the prototype\nX <- as.matrix(scale(as.matrix(iris[sample(1:150, 50, replace = FALSE), 1:4])))\nY <- as.matrix(scale(as.matrix(USArrests)))\nn   <- nrow(X)\np_X <- ncol(X)\np_Y <- ncol(Y)\n\n# generate 10 of each by perturbation\nmats <- vector(\"list\", length = 20L)\nfor (i in 1:10){\n  mats[[i]] <- X + matrix(rnorm(n * p_X, sd = 1), nrow = n)\n}\nfor (j in 11:20){\n  mats[[j]] <- Y + matrix(rnorm(n * p_Y, sd = 1), nrow = n)\n}\n\n# compute similarities\nout_R2 <- pwcca(mats)\n\n# visualize: two heatmaps side by side\nlabs <- paste0(\"rep \", 1:20)\npar(pty = \"s\")\n\nimage(out_R2[, 20:1], axes = FALSE, main = \"Linear Regression\")\naxis(1, seq(0, 1, length.out = 20), labels = labs, las = 2)\naxis(2, at = seq(0, 1, length.out = 20), labels = rev(labs), las = 2)\n```\n\n::: {.cell-output-display}\n![](LinearRegression_files/figure-html/unnamed-chunk-3-3.png){width=672}\n:::\n:::\n\n:::\n\n\n### References\n::: {#refs}\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}